@prefix fs: <http://fairspace.io/ontology#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix xml: <http://www.w3.org/XML/1998/namespace> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

fs:ClassShapeMeta a sh:NodeShape ;
    sh:closed true ;
    sh:description "Meta shape of classes." ;
    sh:name "Class Shape Meta" ;
    sh:property [
        sh:datatype xsd:string ;
        sh:maxCount 1 ;
        sh:maxLength 128 ;
        sh:minCount 1 ;
        sh:path sh:name ; 
        sh:name "Class name"
    ], [
        # This means every value for predicate sh:property should have this type.
        sh:class sh:PropertyShape ;
        sh:minCount 1 ;
        sh:path sh:property ;
        sh:name "Properties" ; 
        sh:description "List of all properties and relations for this class." 
    ], [
        sh:value true ;
        sh:path sh:closed ; 
        sh:description "sh:closed should be true."
    ], [
        sh:class fs:Class ;
        sh:maxCount 1 ;
        sh:minCount 1 ;
        sh:path sh:targetClass ; 
        sh:description "IRI of the class this shape constrains."
    ], [
        sh:datatype xsd:string ;
        sh:maxCount 1 ;
        sh:minCount 1 ;
        sh:path sh:description ;
        sh:name "Class description"
    ], [
        sh:datatype xsd:boolean ;
        sh:maxCount 1 ;
        sh:path fs:showInCatalog ;
        sh:name "Show in catalog" ;
        sh:description "This will allow user to create new instances of this class which show up in the metadata browser."
    ] ;
    sh:targetClass fs:ClassShape ;
    sh:ignoredProperties ( rdf:type owl:sameAs sh:ignoredProperties ) .

fs:PropertyShapeMeta a sh:NodeShape ;
    sh:closed true ;
    sh:description "Meta shape of FS defined properties." ;
    sh:name "Property Shape Meta" ;
    sh:property [
        sh:datatype xsd:string ;
        sh:maxCount 1 ;
        sh:maxLength 128 ;
        sh:minCount 1 ;
        sh:path sh:name ;
        sh:name "Property name"
    ], [
        sh:datatype xsd:integer ;
        sh:path sh:minCount ;
        sh:maxInclusive 1 ;
        sh:lessThanOrEquals sh:maxCount ;
        sh:name "Minimum number of values"
    ], [
        sh:datatype xsd:integer ;
        sh:path sh:maxCount ;
        sh:greaterThanOrEquals sh:minCount ;
        sh:minInclusive 1 ;
        sh:name "Maximum number of values"
    ], [
        sh:class rdf:List ;
        sh:path sh:in ;
        sh:name "Controlled vocabulary"
    ], [
        sh:datatype xsd:string ;
        sh:maxCount 1 ;
        sh:minCount 1 ;
        sh:path sh:description ;
        sh:name "Property description"
    ], [
        sh:path sh:datatype ;
        # direct controlled vocabulary approach
        sh:in ( xsd:string xsd:integer xsd:date xsd:dateTime xsd:long xsd:boolean )  ;
        sh:name "Datatype"
    ], [
        sh:path sh:message
    ], [
        sh:datatype xsd:integer ;
        sh:path sh:maxLength ;
        sh:name "Maximum length (for string only)"
    ], [
        sh:maxCount 1 ;
        sh:minCount 1 ;
        sh:path sh:path ;
        sh:nodeKind sh:IRI ;
        sh:name "Property identifier"
    ], [
        sh:path fs:machineOnly
    ] ;
    sh:or ( 
        [ sh:path sh:in ; 
        	sh:minCount 1  ] 
        [ sh:path sh:datatype ; 
          sh:minCount 1  ]
      ) ; 
    sh:targetClass fs:PropertyShape ;
    sh:ignoredProperties ( rdf:type owl:sameAs sh:ignoredProperties ) .

fs:RelationShapeMeta a sh:NodeShape ;
    sh:closed true ;
    sh:description "Meta shape of FS defined relations." ;
    sh:name "Relation Shape Meta" ;
    sh:property [
        sh:datatype xsd:integer ;
        sh:path sh:minCount ;
        sh:maxInclusive 1 ;
        sh:lessThanOrEquals sh:maxCount ;
        sh:name "Minimum number of values"
    ], [
        sh:datatype xsd:integer ;
        sh:path sh:maxCount ;
        sh:minInclusive 1 ;
        sh:greaterThanOrEquals sh:minCount ;
        sh:name "Maximum number of values"
    ], [
        sh:class fs:Class ;
        sh:path sh:class ;
        sh:name "Class target"
    ], [
        sh:datatype xsd:string ;
        sh:maxCount 1 ;
        sh:minCount 1 ;
        sh:path sh:description ;
        sh:name "Relation description"
    ], [
        sh:path sh:message
    ], [
        sh:maxCount 1 ;
        sh:minCount 1 ;
        sh:path sh:path ;
        sh:nodeKind sh:IRI ;
        sh:name "Relation identifier"
    ], [
        sh:datatype xsd:string ;
        sh:maxCount 1 ;
        sh:maxLength 128 ;
        sh:minCount 1 ;
        sh:path sh:name ;
        sh:name "Relation name"
    ], [
        sh:path fs:machineOnly
    ] ;
    sh:targetClass fs:RelationShape ;
    sh:ignoredProperties ( rdf:type owl:sameAs sh:ignoredProperties ) .
